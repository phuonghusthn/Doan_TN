{"ast":null,"code":"var _jsxFileName = \"E:\\\\DATN_2020\\\\src\\\\components\\\\content\\\\reportmanagement\\\\lockerhistoryreport.js\";\nimport React, { Fragment } from 'react';\nimport MaterialTable from 'material-table';\nimport TableIcons from '../../common/materialicon';\nimport Input from '../../common/input';\nimport Button from '../../common/button';\nimport Combobox from '../../common/combobox';\nimport HistoryReport from '../../../core/report';\nimport DatePicker from '../../common/datepicker';\nimport Building from '../../../core/building';\nimport Level from '../../../core/level';\nimport Controller from '../../../core/controller';\nexport default class LockerHistoryReport extends React.Component {\n  constructor(props) {\n    super(props);\n    this.labelInput = '';\n    this.eNameInput = '';\n    this.eCodeInput = '';\n    this.sTimeInput = '';\n    this.eTimeInput = '';\n    this.DictBName = {};\n    this.Build = [];\n    this.DictBId = {};\n    this.BIdInput = 0;\n    this.DictBLvIName = {};\n    this.DictBLvIId = {};\n    this.Imei = [];\n    this.BLvIInput = '';\n    this.DictLvName = {};\n    this.DictLvId = {};\n    this.Level = [];\n    this.LvIdInput = 0;\n    this.columns = [{\n      title: 'Tòa nhà',\n      field: 'bName'\n    }, {\n      title: 'Tầng',\n      field: 'lLv'\n    }, {\n      title: 'Tủ',\n      field: 'lLabel'\n    }, {\n      title: 'Hành động',\n      field: 'act',\n      render: rowData => {\n        if (rowData.act === 'DROPOFF') {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              color: 'green'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 25\n            }\n          }, \"tr\\u1EA3 t\\u1EE7\");\n        } else if (rowData.act === 'PICKUP_HOLD') {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              color: 'gray'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 25\n            }\n          }, \"m\\u1EDF t\\u1EE7\");\n        } else {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              color: 'gray'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 25\n            }\n          }, \"M\\u1EDF t\\u1EEB web\");\n        }\n      }\n    }, {\n      title: 'Trạng thái cánh tủ',\n      field: 'dState',\n      render: rowData => {\n        if (rowData.dState === 'OPEN') {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              color: 'grên'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 25\n            }\n          }, \"c\\xE1nh t\\u1EE7 m\\u1EDF\");\n        } else {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            style: {\n              color: 'red'\n            },\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 25\n            }\n          }, \"c\\xE1nh t\\u1EED \\u0111\\xF3ng\");\n        }\n      }\n    }, {\n      title: 'Người sử dụng cuối cùng',\n      field: 'eName'\n    }, {\n      title: 'ID nhân sự',\n      field: 'eCode'\n    }, {\n      title: 'Thời điểm thao tác cuối cùng',\n      field: 'aTime'\n    }];\n    this.options1 = {\n      search: false,\n      showTitle: false,\n      pageSize: 20,\n      pageSizeOptions: [20]\n    };\n\n    this.onLabelChange = value => {\n      this.labelInput = value;\n    };\n\n    this.onENameChange = value => {\n      this.eNameInput = value;\n    };\n\n    this.onECodeChange = value => {\n      this.eCodeInput = value;\n    };\n\n    this.onSTimeChange = value => {\n      this.sTimeInput = value;\n    };\n\n    this.onETimeChange = value => {\n      this.eTimeInput = value;\n    };\n\n    this.onSearchClick = () => {\n      this.tableRef.current && this.tableRef.current.onQueryChange(); // if (typeof this.tableRef.current !== 'undefined'){\n      //     this.tableRef.current.onQueryChange();\n      // }\n    };\n\n    this.getDataFromServer = query => {\n      return new Promise((resolve, reject) => {\n        HistoryReport.getHistoryReport(this.BIdInput, this.LvIdInput, this.BLvIInput, this.labelInput, this.eNameInput, this.eCodeInput, this.sTimeInput, this.eTimeInput, query.page + 1).then(value => {\n          if (value) {\n            resolve({\n              data: value.items,\n              page: value.currentPage - 1,\n              totalCount: value.total\n            });\n          } else {\n            resolve({\n              data: [],\n              page: 0,\n              totalCount: 0\n            });\n          }\n        });\n      });\n    };\n\n    this.onChangeBLvI = value => {\n      this.BLvIInput = this.DictBLvIId[value];\n    };\n\n    this.onChangeBLevel = value => {\n      this.LvIdInput = this.DictLvId[value];\n    };\n\n    this.onChangeBuild = value => {\n      this.BIdInput = this.DictBId[value];\n    };\n\n    this.state = {};\n    this.tableRef = React.createRef();\n    this.modalRef = React.createRef();\n  }\n\n  componentDidMount() {\n    Building.getBuilding().then(value => {\n      if (value) {\n        if (value.items.length > 0) {\n          value.items.map((item, index) => {\n            this.DictBName[item.bId] = item.bName;\n            this.DictBId[item.bName] = item.bId;\n            this.Build[index] = item.bName;\n          });\n        }\n      }\n    });\n    Level.getLevel().then(value => {\n      if (value) {\n        if (value.items.length > 0) {\n          value.items.map((item, index) => {\n            let bLv = ' Tòa ' + item.bName + ' - Tầng ' + item.lLv;\n            this.DictLvName[item.lId] = bLv;\n            this.DictLvId[bLv] = item.lId;\n            this.Level[index] = bLv;\n          });\n        }\n      }\n    });\n    Controller.getController().then(value => {\n      if (value) {\n        if (value.items.length > 0) {\n          value.items.map((item, index) => {\n            let bLvImei = ' Tòa ' + item.bName + ' - Tầng ' + item.lLv + '- quản lý cụm tủ: ' + item.sLabel + ' đến ' + item.eLabel;\n            this.DictBLvIName[item.imei] = bLvImei;\n            this.DictBLvIId[bLvImei] = item.imei;\n            this.Imei[index] = bLvImei;\n          });\n        }\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 19\n      }\n    }, \"B\\xE1o c\\xE1o l\\u1ECBch s\\u1EED s\\u1EED d\\u1EE5ng t\\u1EE7 trong h\\u1EC7 th\\u1ED1ng \")), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Combobox, {\n      title: 'Tòa nhà',\n      data: this.Build,\n      onChange: this.onChangeBuild,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Combobox, {\n      title: 'Tầng',\n      data: this.Level,\n      onChange: this.onChangeBLevel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Combobox, {\n      title: 'Thiết bị quản lý',\n      data: this.Imei,\n      onChange: this.onChangeBLvI,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      title: 'Nhãn tủ',\n      onChange: this.onLabelChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      title: 'Tên nhân viên',\n      onChange: this.onENameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      title: 'ID nhân sự',\n      onChange: this.onECodeChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        width: '50%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DatePicker, {\n      title: 'Ngày bắt đầu',\n      onChange: this.onSTimeChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(DatePicker, {\n      title: 'Ngày kết thúc',\n      onChange: this.onETimeChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      title: 'Tìm kiếm',\n      onClick: this.onSearchClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(MaterialTable, {\n      tableRef: this.tableRef,\n      options: this.options1,\n      icons: TableIcons,\n      columns: this.columns,\n      data: this.getDataFromServer,\n      title: \"LockerHistoryReport\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["E:/DATN_2020/src/components/content/reportmanagement/lockerhistoryreport.js"],"names":["React","Fragment","MaterialTable","TableIcons","Input","Button","Combobox","HistoryReport","DatePicker","Building","Level","Controller","LockerHistoryReport","Component","constructor","props","labelInput","eNameInput","eCodeInput","sTimeInput","eTimeInput","DictBName","Build","DictBId","BIdInput","DictBLvIName","DictBLvIId","Imei","BLvIInput","DictLvName","DictLvId","LvIdInput","columns","title","field","render","rowData","act","color","dState","options1","search","showTitle","pageSize","pageSizeOptions","onLabelChange","value","onENameChange","onECodeChange","onSTimeChange","onETimeChange","onSearchClick","tableRef","current","onQueryChange","getDataFromServer","query","Promise","resolve","reject","getHistoryReport","page","then","data","items","currentPage","totalCount","total","onChangeBLvI","onChangeBLevel","onChangeBuild","state","createRef","modalRef","componentDidMount","getBuilding","length","map","item","index","bId","bName","getLevel","bLv","lLv","lId","getController","bLvImei","sLabel","eLabel","imei","padding","display","width"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\r\nimport MaterialTable from 'material-table'\r\nimport TableIcons from '../../common/materialicon'\r\nimport Input from '../../common/input'\r\nimport Button from '../../common/button'\r\nimport Combobox from '../../common/combobox'\r\nimport HistoryReport from '../../../core/report'\r\nimport DatePicker from '../../common/datepicker';\r\nimport Building from '../../../core/building';\r\nimport Level from '../../../core/level';\r\nimport Controller from '../../../core/controller';\r\n\r\n\r\n\r\nexport default class LockerHistoryReport extends React.Component {\r\n\r\n    labelInput = '';\r\n    eNameInput = '';\r\n    eCodeInput = '';\r\n    sTimeInput = '';\r\n    eTimeInput = ''\r\n\r\n    DictBName = {};\r\n    Build = [];\r\n    DictBId = {};\r\n    BIdInput = 0;\r\n\r\n    DictBLvIName = {};\r\n    DictBLvIId = {};\r\n    Imei = [];\r\n    BLvIInput = '';\r\n\r\n    DictLvName = {};\r\n    DictLvId ={};\r\n    Level =[];\r\n    LvIdInput = 0;\r\n\r\n\r\n    columns = [\r\n        { \r\n            title: 'Tòa nhà', \r\n            field: 'bName'\r\n        },\r\n        { \r\n            title: 'Tầng', \r\n            field: 'lLv'\r\n        },\r\n        { \r\n            title: 'Tủ',\r\n             field: 'lLabel' },\r\n        { \r\n            title: 'Hành động', \r\n            field: 'act',\r\n            render: rowData => {\r\n                if (rowData.act === 'DROPOFF') {\r\n                    return(\r\n                        <span style={{color: 'green'}}>\r\n                            trả tủ\r\n                        </span>\r\n                    )\r\n                }\r\n                else if (rowData.act === 'PICKUP_HOLD'){\r\n                    return(\r\n                        <span style={{color: 'gray'}}>\r\n                            mở tủ\r\n                        </span>\r\n                    )\r\n                }\r\n                else {\r\n                    return(\r\n                        <span style={{color: 'gray'}}>\r\n                            Mở từ web\r\n                        </span>\r\n                    )\r\n                }\r\n\r\n            }\r\n        },\r\n        { \r\n            title: 'Trạng thái cánh tủ', \r\n            field: 'dState',\r\n            render: rowData => {\r\n                if ( rowData.dState === 'OPEN') {\r\n                    return(\r\n                        <span style={{color: 'grên'}}>\r\n                            cánh tủ mở\r\n                        </span>\r\n                    )\r\n                }\r\n                else \r\n                {\r\n                    return(\r\n                        <span style={{color: 'red'}}>\r\n                            cánh tử đóng\r\n                        </span>\r\n                    )\r\n                }\r\n                \r\n            }\r\n        },\r\n        { \r\n            title: 'Người sử dụng cuối cùng',\r\n             field: 'eName' \r\n        },\r\n        { \r\n            title: 'ID nhân sự',\r\n             field: 'eCode' \r\n        },\r\n        { \r\n            title: 'Thời điểm thao tác cuối cùng',\r\n             field: 'aTime' \r\n        },\r\n       \r\n    ]\r\n\r\n    options1 = {\r\n        search: false,\r\n        showTitle: false,\r\n        pageSize: 20,\r\n        pageSizeOptions: [20],\r\n    } \r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\r\n        };\r\n        this.tableRef = React.createRef();\r\n        this.modalRef = React.createRef();\r\n\r\n    }\r\n\r\n    onLabelChange  = (value) => \r\n    {\r\n        this.labelInput = value;\r\n    }\r\n\r\n    onENameChange = (value) => {\r\n        this.eNameInput = value;\r\n    }\r\n\r\n    onECodeChange = (value) => {\r\n        this.eCodeInput = value;\r\n    }\r\n\r\n    onSTimeChange = (value) => {\r\n        this.sTimeInput = value;\r\n    }\r\n\r\n    onETimeChange = (value) => {\r\n        this.eTimeInput = value;\r\n    }\r\n\r\n    onSearchClick  = () => {\r\n        this.tableRef.current && this.tableRef.current.onQueryChange();\r\n        // if (typeof this.tableRef.current !== 'undefined'){\r\n        //     this.tableRef.current.onQueryChange();\r\n        // }\r\n    }\r\n\r\n    getDataFromServer = (query) => {\r\n        return new Promise((resolve, reject) => {\r\n            HistoryReport.getHistoryReport(this.BIdInput, this.LvIdInput, this.BLvIInput, this.labelInput, this.eNameInput, this.eCodeInput, this.sTimeInput, this.eTimeInput, query.page +1)\r\n            .then(value => {\r\n                if(value){\r\n                    resolve({\r\n                        data: value.items,\r\n                        page: value.currentPage - 1,\r\n                        totalCount: value.total,\r\n                    })   \r\n                }\r\n                else {\r\n                    resolve({\r\n                        data: [],\r\n                        page: 0,\r\n                        totalCount: 0,\r\n                    })   \r\n                }\r\n                        \r\n            })\r\n        })\r\n    }\r\n\r\n    onChangeBLvI = (value) => {\r\n        this.BLvIInput = this.DictBLvIId[value];\r\n    }\r\n\r\n    onChangeBLevel = (value) => {\r\n        this.LvIdInput = this.DictLvId[value];\r\n    } \r\n     \r\n    onChangeBuild = (value) => {\r\n        this.BIdInput = this.DictBId[value];\r\n    }\r\n\r\n    componentDidMount() {\r\n        Building.getBuilding()\r\n        .then(value => {\r\n            if(value) {\r\n                if(value.items.length >0) {\r\n                    value.items.map((item,index) => {\r\n                        this.DictBName[item.bId] = item.bName;\r\n                        this.DictBId[item.bName] = item.bId;\r\n                        this.Build[index] = item.bName; \r\n                    })\r\n                }\r\n            } \r\n        })\r\n\r\n        Level.getLevel()\r\n        .then(value => {\r\n            if(value){\r\n                if(value.items.length >0) {\r\n                    value.items.map((item, index) => {\r\n                        let bLv = ' Tòa ' + item.bName + ' - Tầng '  + item.lLv;\r\n                        this.DictLvName[item.lId] = bLv;\r\n                        this.DictLvId[bLv] = item.lId;\r\n                        this.Level[index] = bLv ;\r\n                    }) \r\n                }\r\n            }\r\n        });\r\n\r\n        Controller.getController()\r\n        .then(value => {\r\n            if(value) {\r\n                if(value.items.length >0) {\r\n                    value.items.map((item, index) => {\r\n                        let bLvImei =' Tòa ' + item.bName + ' - Tầng '  + item.lLv + '- quản lý cụm tủ: ' + item.sLabel + ' đến ' +  item.eLabel;\r\n                        this.DictBLvIName[item.imei] = bLvImei;\r\n                        this.DictBLvIId[bLvImei] = item.imei;\r\n                        this.Imei[index] = bLvImei;\r\n                    })                    \r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <Fragment>\r\n                <div style={{padding: '10px'}}>\r\n                  <h2>Báo cáo lịch sử sử dụng tủ trong hệ thống </h2>\r\n                </div>\r\n                <div style={{display: 'flex' }}>\r\n                    <Combobox\r\n                        title={'Tòa nhà'} \r\n                        data = {this.Build}\r\n                        onChange = {this.onChangeBuild}\r\n                    /> \r\n                    <Combobox\r\n                        title={'Tầng'}\r\n                        data = {this.Level}\r\n                        onChange = {this.onChangeBLevel}\r\n                    />\r\n                    <Combobox\r\n                        title={'Thiết bị quản lý'} \r\n                        data = { this.Imei}\r\n                        onChange = { this.onChangeBLvI }\r\n                    />\r\n\r\n                    <Input \r\n                        title={'Nhãn tủ'}\r\n                        onChange={this.onLabelChange} \r\n                    />\r\n                    <Input \r\n                        title={'Tên nhân viên'} \r\n                        onChange={this.onENameChange} \r\n                    />\r\n                    <Input \r\n                        title={'ID nhân sự'} \r\n                        onChange={this.onECodeChange} \r\n                    />                   \r\n                </div>\r\n                <div  style={{display: 'flex', width: '50%'}}>\r\n                    <DatePicker\r\n                        title={'Ngày bắt đầu'}\r\n                        onChange = {this.onSTimeChange}\r\n                    />\r\n                    <DatePicker \r\n                        title ={'Ngày kết thúc'}\r\n                        onChange = {this.onETimeChange}\r\n                    />\r\n                    <Button title={'Tìm kiếm'}\r\n                        onClick={this.onSearchClick} />\r\n                </div>\r\n                <MaterialTable\r\n                 tableRef={this.tableRef}\r\n                 options={this.options1}\r\n                 icons={TableIcons}\r\n                 columns={this.columns}\r\n                 data={this.getDataFromServer}\r\n                 title=\"LockerHistoryReport\"\r\n                />\r\n                \r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}